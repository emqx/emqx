Improved IPv6 compatibility for automatic cluster discovery mechanisms based on Kubernetes and etcd.

Prior to this fix, they handled hostnames specified as IPv6 address literals (for example, `http://[::]:8080`) as domain names.
